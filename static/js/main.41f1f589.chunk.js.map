{"version":3,"sources":["connectors.js","ButtonConnect.js","hooks.js","getWeb3.js","App.js","serviceWorker.js","index.js"],"names":["injected","InjectedConnector","supportedChainIds","ButtonConnect","useWeb3React","connector","account","activate","deactivate","active","error","console","log","React","activatingConnector","setActivatingConnector","undefined","suppress","useEffect","ethereum","window","on","handleConnect","handleChainChanged","chainId","handleAccountsChanged","accounts","length","handleNetworkChanged","networkId","removeListener","useInactiveListener","useState","tried","setTried","isAuthorized","then","catch","useEagerConnect","onConnectWallet","onDisconnectWallet","style","display","flexDirection","alignItems","marginBlock","marginTop","marginBottom","NoEthereumProviderError","UnsupportedChainIdError","getErrorMessage","flex","color","type","className","onClick","getWeb3","Promise","resolve","reject","a","web3","Web3","enable","provider","providers","HttpProvider","App","setWeb3","lotteryContract","setGameContract","tokenContract","setTokenContract","allowance","setAllowance","dealer","setDealer","game","setGame","updateGame","parseInt","methods","gameId","call","getGame","id","bet","players","state","message","checkAllowence","_address","alert","makeApprove","value","approve","send","from","createGame","e","preventDefault","betValue","target","elements","mintToken","address","trim","faucet","salt","Math","floor","random","commitMove","stopGame","init","eth","Contract","MonToken","abi","LotteryGame","_dealer","isDealer","onSubmit","htmlFor","placeholder","height","FormGame","includes","map","player","key","winners","Boolean","location","hostname","match","POLLING_INTERVAL","getLibrary","library","Web3Provider","pollingInterval","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.41f1f589.chunk.js","sourcesContent":["import { InjectedConnector } from '@web3-react/injected-connector'\n\nconst NETWORKS = [1, 4, 42, 56, 77, 97, 99, 128, 137, 256, 11112, 11110, 1337]\n\n// const POLLING_INTERVAL = 3000\n\nexport const injected = new InjectedConnector({\n\tsupportedChainIds: NETWORKS\n})\n","import * as React  from 'react'\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\n\nimport {\n\tNoEthereumProviderError,\n} from '@web3-react/injected-connector'\nimport { injected } from './connectors'\nimport {  useInactiveListener, useEagerConnect } from './hooks'\n\n\nfunction getErrorMessage(error) {\n\tif (error instanceof NoEthereumProviderError) {\n\t\treturn 'No Metamask Extension detected, install Metamask Extension on desktop or visit from a dApp browser on mobile.'\n\t} else if (error instanceof UnsupportedChainIdError) {\n\t\treturn \"You're connected to an unsupported network.\"\n\t} else {\n\t\tconsole.error(error)\n\t\treturn 'An unknown error occurred. Check the console for more details.'\n\t}\n}\n\nconst ButtonConnect = () => {\n\tconst { connector,  account, activate, deactivate, active, error } = useWeb3React()\n\tconsole.log(error)\n\t// handle logic to recognize the connector currently being activated\n\tconst [activatingConnector, setActivatingConnector] = React.useState()\n\tReact.useEffect(() => {\n\t\tif (activatingConnector && activatingConnector === connector) {\n\t\t\tsetActivatingConnector(undefined)\n\t\t}\n\t}, [activatingConnector, connector])\n\t// handle logic to eagerly connect to the injected ethereum provider, if it exists and has granted access already\n\tconst triedEager = useEagerConnect()\n\n\t// handle logic to connect in reaction to certain events on the injected ethereum provider, if it exists\n\tuseInactiveListener(!triedEager || !!activatingConnector)\n\n\tconst onConnectWallet = React.useCallback(() => {\n\t\tsetActivatingConnector(injected)\n\t\tactivate(injected)\n\t}, [activate])\n\n\tconst onDisconnectWallet = React.useCallback(() => {\n\t\tsetActivatingConnector(undefined)\n\t\tdeactivate()\n\t}, [deactivate])\n\n\tif (!active)\n\t\treturn (\n            <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center',marginBlock: 20 }}>\n                <button type=\"submit\" className=\"btn btn-primary\" onClick={onConnectWallet}>\n                    Connect Wallet\n                </button>\n            </div>\n\t\t)\n\tif (error) {\n\t\treturn (\n\t\t\t<div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center',marginBlock: 20 }}>\n\t\t\t\t{!!error && <h4 style={{ marginTop: '1rem', marginBottom: '0' }}>{getErrorMessage(error)}</h4>}\n\t\t\t</div>\n\t\t)\n\t}\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\tdisplay: 'flex',\n\t\t\t\tflex: 1,\n\t\t\t\tflexDirection: 'column',\n\t\t\t\talignItems: 'center',\n\t\t\t\tmarginBlock: 20\n\t\t\t}}\n\t\t>\n\t\t\t<div style={{ marginBottom: 20 }}>\n\t\t\t\tHi <span style={{ color: 'orange' }}>{account}</span> <br />\n\t\t\t</div>\n\t\t\t<button type=\"submit\" className=\"btn btn-primary\" onClick={onDisconnectWallet}>\n\t\t\t\tDisconnect\n\t\t\t</button>\n\t\t</div>\n\t)\n}\n\nexport default ButtonConnect","import { useState, useEffect } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport { injected } from './connectors'\n\nexport function useEagerConnect() {\n    const { activate, active } = useWeb3React()\n\n    const [tried, setTried] = useState(false)\n\n    useEffect(() => {\n        injected.isAuthorized().then((isAuthorized) => {\n            if (isAuthorized) {\n                activate(injected, undefined, true).catch(() => {\n                    setTried(true)\n                })\n            } else {\n                setTried(true)\n            }\n        })\n    }, [activate]) // intentionally only running on mount (make sure it's only mounted once :))\n\n    // if the connection worked, wait until we get confirmation of that to flip the flag\n    useEffect(() => {\n        if (!tried && active) {\n            setTried(true)\n        }\n    }, [tried, active])\n\n    return tried\n}\n\nexport function useInactiveListener(suppress = false) {\n    const { active, error, activate } = useWeb3React()\n\n    useEffect(() => {\n        const { ethereum } = window;\n        if (ethereum && ethereum.on && !active && !error && !suppress) {\n            const handleConnect = () => {\n                console.log(\"Handling 'connect' event\")\n                activate(injected)\n            }\n            const handleChainChanged = (chainId) => {\n                console.log(\"Handling 'chainChanged' event with payload\", chainId)\n                activate(injected)\n            }\n            const handleAccountsChanged = (accounts) => {\n                console.log(\"Handling 'accountsChanged' event with payload\", accounts)\n                if (accounts.length > 0) {\n                    activate(injected)\n                }\n            }\n            const handleNetworkChanged = (networkId) => {\n                console.log(\"Handling 'networkChanged' event with payload\", networkId)\n                activate(injected)\n            }\n\n            ethereum.on('connect', handleConnect)\n            ethereum.on('chainChanged', handleChainChanged)\n            ethereum.on('accountsChanged', handleAccountsChanged)\n            ethereum.on('networkChanged', handleNetworkChanged)\n\n            return () => {\n                if (ethereum.removeListener) {\n                    ethereum.removeListener('connect', handleConnect)\n                    ethereum.removeListener('chainChanged', handleChainChanged)\n                    ethereum.removeListener('accountsChanged', handleAccountsChanged)\n                    ethereum.removeListener('networkChanged', handleNetworkChanged)\n                }\n            }\n        }\n    }, [active, error, suppress, activate])\n}\n","import Web3 from \"web3\";\n\nexport const getWeb3 = () =>\n  new Promise(async (resolve, reject) => {\n    // Wait for loading completion to avoid race conditions with web3 injection timing.\n    // window.addEventListener(\"load\", async () => {\n      // Modern dapp browsers...\n      if (window.ethereum) {\n        const web3 = new Web3(window.ethereum);\n        try {\n          // Request account access if needed\n          await window.ethereum.enable();\n          // Accounts now exposed\n          resolve(web3);\n        } catch (error) {\n          reject(error);\n        }\n      }\n      // Legacy dapp browsers...\n      else if (window.web3) {\n        // Use Mist/MetaMask's provider.\n        const web3 = window.web3;\n        console.log(\"Injected web3 detected.\");\n        resolve(web3);\n      }\n      // Fallback to localhost; use dev console port by default...\n      else {\n        const provider = new Web3.providers.HttpProvider(\n          \"http://127.0.0.1:8545\"\n        );\n        const web3 = new Web3(provider);\n        console.log(\"No web3 instance injected, using Local web3.\");\n        resolve(web3);\n      }\n    // });\n  });\n\n","import { useWeb3React } from \"@web3-react/core\";\nimport React, { useEffect, useState } from \"react\";\nimport Web3 from \"web3\";\n\nimport ButtonConnect from \"./ButtonConnect\";\nimport LotteryGame from \"./contracts/LotteryGame.json\";\nimport MonToken from \"./contracts/Mon.json\";\nimport { getWeb3 } from \"./getWeb3\";\n\n\nfunction App() {\n\tconst [web3, setWeb3] = useState(undefined);\n\tconst [lotteryContract, setGameContract] = useState(undefined);\n\tconst [tokenContract, setTokenContract] = useState(undefined);\n\tconst [allowance, setAllowance] = useState(0);\n\tconst [dealer, setDealer] = useState(undefined);\n\tconst [game, setGame] = useState();\n\n\tconst { account,  } = useWeb3React()\n\n\tconst isReady = () => {\n\t\treturn (\n\t\t\ttypeof lotteryContract !== \"undefined\" &&\n\t\t\ttypeof tokenContract !== \"undefined\" &&\n\t\t\ttypeof web3 !== \"undefined\" &&\n\t\t\ttypeof account !== \"undefined\"\n\t\t);\n\t};\n\n\t\n\n\tasync function updateGame() {\n\t\ttry {\n\t\t\tlet gameId = parseInt(await lotteryContract.methods.gameId().call());\n\t\t\tgameId = gameId > 0 ? gameId - 1 : gameId;\n\n\t\t\tconst game = await lotteryContract.methods.getGame(gameId).call();\n\t\t\tsetGame({\n\t\t\t\tid: game[0],\n\t\t\t\tbet: game[1],\n\t\t\t\tplayers: game[2],\n\t\t\t\tstate: game[3],\n\t\t\t});\n\t\t} catch (err) {\n\t\t\tconsole.log(err.message);\n\t\t}\n\t}\n\n\tconst checkAllowence = async () => {\n\t\ttry {\n\t\t\tconst allowance = await tokenContract.methods.allowance(account, lotteryContract._address).call();\n\t\t\tsetAllowance(allowance);\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\talert(err.message);\n\t\t}\n\t};\n\n\tconst makeApprove = async (value) => {\n\t\ttry {\n\t\t\tawait tokenContract.methods.approve(value).send({ from: account });\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\talert(err.message);\n\t\t}\n\t};\n\n\tconst createGame = async (e) => {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tconst betValue = e.target.elements[0].value;\n\t\t\tawait lotteryContract.methods.createGame(betValue).send({ from: account });\n\t\t\tawait updateGame();\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\talert(err.message);\n\t\t}\n\t};\n\n\tconst mintToken = async (e) => {\n\t\te.preventDefault();\n\t\tif (!tokenContract) return;\n\n\t\tconst address = e.target.elements[0].value.trim();\n\t\tconsole.log(tokenContract.methods)\n\t\ttry {\n\t\t\tawait tokenContract.methods.faucet(address, 10000).send({from: account})\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\talert(err.message);\n\t\t}\n\t}\n\n\tconst bet = async (e) => {\n\t\te.preventDefault();\n\t\tif (!game) return;\n\n\t\tconst betValue = e.target.elements[0].value;\n\t\ttry {\n\t\t\tif (allowance < game.bet) {\n\t\t\t\tconst approve = await makeApprove(game.bet);\n\t\t\t\tif (!approve) return;\n\t\t\t}\n\n\t\t\tconst salt = Math.floor(Math.random() * 1000);\n\t\t\tawait lotteryContract.methods\n\t\t\t\t.commitMove(game.id, betValue, salt)\n\t\t\t\t.send({ from: account });\n\t\t\tawait updateGame();\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\talert(err.message);\n\t\t}\n\t};\n\n\tasync function stopGame(e) {\n\t\te.preventDefault();\n\n\t\tawait lotteryContract.methods.stopGame(game.id).send({ from: account });\n\t\tawait updateGame();\n\t}\n\n\tconst init = async () => {\n\t\tconst web3 = await getWeb3();\n\t\t// const networkId = await web3.eth.net.getId();\n\t\t// const deployedNetworkLotteryGame = LotteryGame.networks[networkId];\n\t\t// const deployedNetworkLotteryGameERC20Token = MonToken.networks[networkId];\n\t\tconst tokenContract = new web3.eth.Contract(\n\t\t\tMonToken.abi,\n\t\t\t// deployedNetworkLotteryGameERC20Token && deployedNetworkLotteryGameERC20Token.address\n\t\t\t'0x7a25b8352D46E39347A082Fd920f0Eb0108ab8dA'\n\t\t);\n\t\t\n\t\tconst lotteryContract = new web3.eth.Contract(\n\t\t\tLotteryGame.abi,\n\t\t\t// deployedNetworkLotteryGame && deployedNetworkLotteryGame.address\n\t\t\t'0x7F59F3Ca0782de6Dcd91AafDaF67FE473af5A52d'\n\t\t);\n\t\t\n\t\tconst _dealer = await lotteryContract.methods.dealer().call();\n\n\t\tsetWeb3(web3);\n\t\tsetTokenContract(tokenContract);\n\t\tsetGameContract(lotteryContract);\n\t\tsetDealer(_dealer);\n\t};\n\n\tuseEffect(() => {\n\t\tif (isReady()) {\n\t\t\tupdateGame();\n\t\t\tcheckAllowence();\n\t\t}\n\t}, [account]);\n\n\tuseEffect(() => {\n\t\tconsole.log(\"sfasdfasd\",account)\n\t\tif (account)\n\t\t\tinit();\n\t}, [account]);\n\n\tconst isDealer = typeof dealer != \"undefined\" && account == dealer;\n\n\tconst FormFaucet = () => (\n\t\t<form onSubmit={(e) => mintToken(e)}>\n\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t<label htmlFor=\"Get Faucet\">Mint 10000 token from Faucet</label>\n\t\t\t\t\t<input placeholder=\"Fill player address to get token from faucet\" type=\"text\" className=\"form-control\" id=\"address_faucet\" />\n\t\t\t\t</div>\n\t\t\t\t<button  type=\"submit\" className=\"btn btn-primary\">\n\t\t\t\t\tMint \n\t\t\t\t</button>\n\t\t\t</form>\n\t)\n\n\tconst DealerComponent = () => {\n\t\tlet FormGame;\n\t\tif (game){\n\t\t\tif ([2, 3].includes(game.state)) {\n\t\t\t\tFormGame = () => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p>Bet: {game.id}</p>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h2>Players</h2>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t{game.players.map((player) => (\n\t\t\t\t\t\t\t\t\t<li key={player}>{player}</li>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t\t<div className=\"col-sm-12\">\n\t\t\t\t\t\t\t\t<h2>Close Game</h2>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tonClick={(e) => stopGame(e)}\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-success\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tClose Game\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (game.state === 4) {\n\t\t\t\tFormGame = () => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p>Bet: {game.id}</p>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h2>Winners</h2>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t{game.winners.map((player) => (\n\t\t\t\t\t\t\t\t\t<li key={player}>{player}</li>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<div className=\"col-sm-12\">\n\t\t\t\t\t\t\t\t<h2>Create Game</h2>\n\t\t\t\t\t\t\t\t<form onSubmit={(e) => createGame(e)}>\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"bet\">Bet Value</label>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" className=\"form-control\" id=\"bet\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary\">\n\t\t\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tFormGame = () =>  (\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col-sm-12\">\n\t\t\t\t\t\t<h2>Create Game</h2>\n\t\t\t\t\t\t<form onSubmit={(e) => createGame(e)}>\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<label htmlFor=\"bet\">Bet Value</label>\n\t\t\t\t\t\t\t\t<input type=\"text\" className=\"form-control\" id=\"bet\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary\">\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<FormGame />\n\t\t\t</>\n\t\t)\n\t};\n\n\tconst PlayerComponent = () => (\n\t\t<div className=\"row\">\n\t\t\t<div className=\"col-sm-12\">\n\t\t\t\t<h2>Bet</h2>\n\t\t\t\t<form onSubmit={(e) => bet(e)}>\n\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t<label htmlFor=\"bet\">Bet</label>\n\t\t\t\t\t\t<input type=\"text\" className=\"form-control\" id=\"bet\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary\">\n\t\t\t\t\t\tSubmit\n\t\t\t\t\t</button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\treturn (\n\t\t\n\t\t\t<div className=\"container\">\n\t\t\t\t<ButtonConnect />\n\t\t\t\t<h1 className=\"text-center\">Lottery Game</h1>\n\t\t\t\t<FormFaucet />\n\t\t\t\t<div style={{height: 50}} />\n\n\t\t\t\t{isDealer ? \n\t\t\t\t\t<DealerComponent />\n\t\t\t\t: \n\t\t\t\t\t<PlayerComponent />\n\t\t\t\t}\n\t\t\t</div>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Web3ReactProvider } from '@web3-react/core'\nimport { Web3Provider } from '@ethersproject/providers'\nimport './index.css';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n\nconst POLLING_INTERVAL = 3000\n\nfunction getLibrary(provider) {\n\tconst library = new Web3Provider(provider)\n\tlibrary.pollingInterval = POLLING_INTERVAL\n\treturn library\n}\n\nconst Root = () => (\n    <Web3ReactProvider getLibrary={getLibrary}>\n        <App />\n    </Web3ReactProvider>\n)\n\nReactDOM.render(<Root />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}